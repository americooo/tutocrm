<canvas id="pieChart" class="mb-8"></canvas>
<canvas id="barChart"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
fetch('/expenses/pie/')
  .then(res => res.json())
  .then(data => {
    const labels = data.map(item => item.category);
    const amounts = data.map(item => item.total);

    new Chart(document.getElementById('pieChart'), {
      type: 'pie',
      data: {
        labels: labels,
        datasets: [{
          data: amounts,
          backgroundColor: ['#f87171', '#34d399', '#60a5fa', '#fbbf24', '#a78bfa']
        }]
      }
    });
  });

fetch('/expenses/recent/')
  .then(res => res.json())
  .then(data => {
    const labels = data.map(item => item.month);
    const amounts = data.map(item => item.amount);

    new Chart(document.getElementById('barChart'), {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [{
          label: 'Oxirgi 30 kun xarajatlari',
          data: amounts,
          backgroundColor: '#3b82f6'
        }]
      }
    });
  });
</script>
